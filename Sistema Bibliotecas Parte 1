// PRÁTICA: SISTEMA DE BIBLIOTECA - PARTE 1
//
// OBJETIVO DESTA PARTE:
// IMPLEMENTAR O CADASTRO E A LISTAGEM DE LIVROS USANDO UM ARRAY ESTÁTICO
// FOCO EM STRUCTS, ENTRADA/SAÍDA DE DADOS E ORGANIZAÇÃO BÁSICA.
//
//=============================================================================================================

#include <stdio.h>
#include <stdlib.h> //
#include <string.h> // Para strcspn()

// --- Constantes Globais ---
#define MAX_LIVROS 50
#define TAM_STRING 100

// --- Definição da Estrutura (Struct) ---
typedef struct {
	char nome[TAM_STRING];
	char autor[TAM_STRING];
	char editora[TAM_STRING];
	int edicao;
} Livro;

// --- Função para limpar o buffer de entrada ---
void limparBufferEntrada() {
	int c;
	while ((c = getchar()) != '\n' && c != EOF);
}

// --- Função Principal (main) ---
int main () {
	Livro biblioteca[MAX_LIVROS];
	int totalLivros = 0;
	int opcao;
	
	// --- Laço Principal do Menu ---
	do {
		
		// Exibe o menu de opções.		
		printf("================================\n");
		printf("    BIBLIOTECA - PARTE 1\n");
		printf("================================\n");
		printf("1 - Cadastrar novo livro\n");
		printf("2 - Listar todos os livros\n");
		printf("0 - Sair\n");
		printf("--------------------------------\n");
		printf("Escolha uma opcao: ");
		
		// Lê a opção do usuário.
		scanf("%d", &opcao);
		limparBufferEntrada(); // Limpa o '\n' deixado pelo scanf.
		
		// --- Processamento da Opção ---
		switch (opcao){
			case 1: // CADASTRO DE LIVRO
			    printf("--- Cadastro de Novo Livro ---\n\n");
			    
			    if(totalLivros < MAX_LIVROS) {
			    	printf("Digite o nome do livro: ");
			    	fgets(biblioteca[totalLivros].nome, TAM_STRING, stdin);
			    		
			    	printf("Digite o autor: ");
					fgets(biblioteca[totalLivros].autor, TAM_STRING,stdin);
					
					printf("Digite a editora: ");
					fgets(biblioteca[totalLivros].editora, TAM_STRING, stdin);
					
					biblioteca[totalLivros].nome[strcspn(biblioteca[totalLivros].nome, "\n")] = '\
					biblioteca[totalLivros].autor[strcspn(biblioteca[totalLivros].autor, "\n")] =
					biblioteca[totalLivros].nome[strcspn(biblioteca[totalLivros].nome, "\n")] =
					
					printf("Digite a edicao: ");
					scanf("%d", &biblioteca[totalLivros].edicao);
					limparBufferEntrada(); 
					
					totalLivros++;
					
					printf("\nLivro cadastrado com sucesso!\n");
				} else {
					for(int i = 0; i < totalLivros; i++);
					printf("------------------------------------- ");
					
					
					
				}
		}
		
		
		
		
	}	
	
	
	
}



